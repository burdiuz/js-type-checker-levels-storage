{"version":3,"file":"index.js","sources":["node_modules/@actualwave/has-own/has-own.js","source/levels.js","source/storage.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nconst hasOwn = (\n  (has) =>\n  (target, property) =>\n  Boolean(target && has.call(target, property))\n)(Object.prototype.hasOwnProperty);\n\nexports.hasOwn = hasOwn;\nexports.default = hasOwn;","import hasOwn from '@actualwave/has-own';\n\nexport const REPORT_NEVER = 'never';\nexport const REPORT_ONCE = 'once';\nexport const REPORT_ALL = 'all';\n\nconst REPORT_KEY = Symbol('type-checkers:report-level');\nconst PROPERTY_REPORT_KEY = Symbol('type-checkers:property-report-level');\n\nlet globalReportingLevel = REPORT_ALL;\n\nconst validateReportingLevel = (level) => {\n  switch (level) {\n    case REPORT_NEVER:\n    case REPORT_ONCE:\n      return level;\n    default:\n      return REPORT_ALL;\n  }\n};\n\nexport const setGlobalReportingLevel = (level) => {\n  globalReportingLevel = validateReportingLevel(level);\n};\n\nexport const getGlobalReportingLevel = () => globalReportingLevel;\n\nconst setTargetGeneralReportingLevel = (target, level) => {\n  if (level) {\n    target[REPORT_KEY] = validateReportingLevel(level);\n  } else {\n    delete target[REPORT_KEY];\n  }\n};\n\nconst setTargetPropertyReportingLevel = (target, perPropertyLevels) => {\n  if (!perPropertyLevels) {\n    delete target[PROPERTY_REPORT_KEY];\n    return;\n  }\n\n  target[PROPERTY_REPORT_KEY] = Object.keys(perPropertyLevels).reduce(\n    (levels, prop) => {\n      levels[prop] = validateReportingLevel(perPropertyLevels[prop]);\n      return levels;\n    },\n    {}\n  );\n};\n\nexport const setReportingLevel = (target, generalLevel, perPropertyLevels) => {\n  setTargetGeneralReportingLevel(target, generalLevel);\n  setTargetPropertyReportingLevel(target, perPropertyLevels);\n};\n\nconst getTargetReportingLevel = (target, key) => {\n  if (hasOwn(target[PROPERTY_REPORT_KEY], key)) {\n    return target[PROPERTY_REPORT_KEY][key];\n  }\n\n  return target[REPORT_KEY];\n};\n\nexport const getReportingLevel = (target, key) => {\n  let level = getTargetReportingLevel(target, key);\n\n  if (!level) {\n    level = getTargetReportingLevel(target.constructor, key);\n  }\n\n  return level || getGlobalReportingLevel();\n};\n","import { REPORT_NEVER, REPORT_ONCE, REPORT_ALL, getReportingLevel } from './levels';\n\nexport const createTypesStorage = () => new Map();\n\n/**\n *\n * @param {Map} storage\n */\nexport const hasTypeInformation = (storage, key) => {\n  const info = storage.get(key);\n\n  return info && info.length;\n};\n\n/**\n *\n * @param {Map} storage\n * @param {*} key\n * @param {Function} callback\n */\nexport const getTypeInformation = (storage, key, callback) => {\n  const info = storage.get(key);\n\n  if (info) {\n    info.forEach((types) => callback(key, types));\n  }\n};\n\n/**\n *\n * @param {Map} storage\n * @param {*} key\n * @param {*} types\n * @param {Number} level\n */\nexport const storeTypeInformation = (storage, key, types, level) => {\n  if (!types) return;\n\n  switch (level) {\n    case REPORT_NEVER:\n      // storage.delete(key); // do we need this?\n      break;\n    case REPORT_ONCE:\n      storage.delete(key);\n      storage.set(key, [types]);\n      break;\n    case REPORT_ALL:\n    default:\n      {\n        const info = storage.get(key);\n        if (info) {\n          info.push(types);\n        } else {\n          storage.set(key, [types]);\n        }\n      }\n      break;\n  }\n};\n\nexport const storeTypeInformationFor = (storage, target, key, types) =>\n  storeTypeInformation(storage, key, types, getReportingLevel(target, key));\n"],"names":["REPORT_NEVER","REPORT_ONCE","REPORT_ALL","REPORT_KEY","Symbol","PROPERTY_REPORT_KEY","globalReportingLevel","validateReportingLevel","level","setGlobalReportingLevel","getGlobalReportingLevel","setTargetGeneralReportingLevel","target","setTargetPropertyReportingLevel","perPropertyLevels","Object","keys","reduce","levels","prop","setReportingLevel","generalLevel","getTargetReportingLevel","key","hasOwn","getReportingLevel","constructor","createTypesStorage","Map","hasTypeInformation","storage","info","get","length","getTypeInformation","callback","forEach","types","storeTypeInformation","delete","set","push","storeTypeInformationFor"],"mappings":"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"}